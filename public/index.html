<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="css" href="public/css/style.css">
    <script src="js/app.js"></script>
    <script src="lib/angular-1.4.3.js"></script>
    <script src="lib/ui-router.js"></script>
    <title>Mango</title>
</head>
<body ng-app="mango" ng-controller="listingController">

    <div class="main-container" ui-view>

    </div>

    <script>

        var app = angular.module("mango", ["ui.router"]);
        app.service("profilesService", ["$http", function($http){
            $http.get("/profiles").then(function(){})
            return {
                list: [],
                waiting: true,
                all : function(){
                    var self = this;
                    return $http.get("/profiles").then(function(response){
                        self.list = response.data;
                        self.waiting = false;
                        return response;
                    });
                }

            }
        }]);
        app.controller("listingController", ["$scope", "profilesService", function($scope, profilesService){
            $scope.profiles = profilesService;
            profilesService.all()
        }]);



        app.config(function($stateProvider, $urlRouterProvider) {
            $urlRouterProvider.otherwise("/");
            $stateProvider
                    .state('home', {
                        url: "/",
                        templateUrl: "partials/listing.html"
                    })
//                    .state('state1', {
//                        url: "/state1",
//                        templateUrl: "partials/state1.html"
//                    })
//                    .state('state1.list', {
//                        url: "/list",
//                        templateUrl: "partials/state1.list.html",
//                        controller: function($scope) {
//                            $scope.items = ["A", "List", "Of", "Items"];
//                        }
//                    })
        });
    </script>
</body>
</html>